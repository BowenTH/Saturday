<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="../common/mui.css"/>
		<link rel="stylesheet" type="text/css" href="main.css"/>
		<script src="../common/mui.js" type="text/javascript" charset="utf-8"></script>
		<title></title>
	</head>
	<body>
		<!-- 侧滑导航根容器 -->
<div class="mui-off-canvas-wrap mui-draggable">
  <!-- 主页面容器 -->
  <div class="mui-inner-wrap">
     <!-- 菜单容器 -->
    <aside class="mui-off-canvas-left">
      <div class="mui-scroll-wrapper">
        <div class="mui-scroll">
          <!-- 菜单具体展示内容 -->
          <div class="">
          	<div id="sign">
          		<img src="../img/load1.png"/>
          		<span id="">nat</span><pre style="font-size: 70%;">高手的心似星空，看得见却看不懂。</pre>
          	</div>
          	<button id='closList' type="button" class="mui-btn mui-btn-block mui-btn-red ">关闭侧滑栏</button>
          	<button id="setting" type="button" class="mui-btn mui-btn-grey mui-btn-block">设置</button>
          	<button id='checkUp' type="button" class="mui-btn mui-btn-green mui-btn-block">检查新版本</button>
          </div>
        </div>
      </div>
    </aside>
    </header>
    <!-- 主页面标题 -->
    <!-- 主页面内容容器 -->
    <div class="mui-content mui-scroll-wrapper" >
      <div class="mui-scroll">
        <!-- 主界面具体展示内容 --> 			  
		    <!--<div class="mui-bar-nav" style="height: 50px;">
				<span id='' class="mui-icon mui-icon-bars" style="margin: 6px;"></span>
				<input style="width: 40%;float:right" type="search" name="xx" required="" placeholder="Search" x-webkit-speech="" x-webkit-grammar="builtin:search" lang="zh-CN">
			</div>-->
			<div id="">
				<img src="../img/0.jpg" style="height: 100px;width: 100%;"/>
			</div>
			
			<ul class="mui-table-view mui-grid-view mui-grid-9" style="background-color: lightgreen;position:page;">
			<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
			    <a href="#">
			        <span class="mui-icon mui-icon-home"></span>
			        <div class="mui-media-body">蔬菜</div>
			    </a>
			</li>
			<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
			    <a href="#">
			        <span class="mui-icon mui-icon-email"><span class="mui-badge mui-badge-red">6</span></span>
			        <div class="mui-media-body">夜宵</div>
			    </a>
			</li>
			<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
			    <a href="#">
			        <span class="mui-icon mui-icon-chatbubble"></span>
			        <div class="mui-media-body">品牌馆</div>
			    </a>
			</li>
			<li id="location" class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
			    <a href="#">
			        <span class="mui-icon mui-icon-location"></span>
			        <div class="mui-media-body">当前位置</div>
			    </a>
			</li>
			<li id="fruit" class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
			    <a href="#">
			        <span class="mui-icon mui-icon-search"></span>
			        <div class="mui-media-body">水果</div>
			    </a>
			</li>
			<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3">
			    <a href="#">
			        <span class="mui-icon mui-icon-phone"></span>
			        <div class="mui-media-body">超市购</div>
			    </a>
			</li>
		</ul>
  </div>
	</div>
		
	
	<script type="text/javascript">
		mui.init();
		
		document.getElementById('fruit').addEventListener('tap',function(){
			//plus.navigator.closeSplashscreen();
			mui.openWindow({
				url:"fruit/fruit-header.html",
				id:"fruit",
				style:{
					popGesture:'none'
				},
				show:{
				aniShow:'slide-i n-right',
				duration:'400'}
				
			})
		});
		
		document.getElementById('location').addEventListener('tap',function(){
			mui.openWindow({
				url:"location/location.html",
				id:"location",
				style:{
					popGesture:'none'
				},show:{
				aniShow:'pop-in',
				duration:'400'}
			})
		});
		
		
		//!!!!!!!!!!!!!!!!!!!!!!!!
		mui.init({
				pullRefresh: {
					container: '#pullrefresh',
					down: {
						callback: pulldownRefresh
					},
					up: {
						contentrefresh: '正在加载...',
						callback: pullupRefresh
//						callback: pulldownRefresh
					}
				}
			});
//			function pulldownRefresh(){
//				mui.toast('refresh success');
//			}

			function pulldownRefresh() {
				mui.toast('down');
				setTimeout(function() {
					var table = document.body.querySelector('.mui-table-view');
					var cells = document.body.querySelectorAll('.mui-table-view-cell');
//					var table = document.body.querySelector('.x');
//					var cells = document.body.querySelectorAll('.x');
					for (var i = cells.length, len = i + 2; i < len; i++) {
						var li = document.createElement('li');
						li.className = 'mui-table-view-cell';
//						li.className = 'mui-btn';
						li.innerHTML = '<a class="mui-navigate-right">Itemx ' + (i + 1) + '</a>';
						//下拉刷新，新纪录插到最前面；
						//table.insertBefore(li, table.firstChild);
					}
					mui('#pullrefresh').pullRefresh().endPulldownToRefresh(); //refresh completed
				}, 1500);
			}
			var count = 0;
			/**
			 * 上拉加载具体业务实现
			 */
			function pullupRefresh() {
				mui.toast('up');
				//mui('#pullrefresh').pullRefresh().pullupLoading();
				setTimeout(function() {
					mui('#pullrefresh').pullRefresh().endPullupToRefresh((++count > 5)); //参数为true代表没有更多数据了。
					var table = document.body.querySelector('.mui-table-view');
					var cells = document.body.querySelectorAll('.mui-table-view-cell');
//					var table = document.body.querySelector('.x');
//					var cells = document.body.querySelectorAll('.x');
					for (var i = cells.length, len = i + 2; i < len; i++) {
						var li = document.createElement('li');
						li.className = 'mui-table-view-cell';
//						li.className = 'mui-btn';
//						li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
						li.innerHTML = '<a>'+i+ '</a>';
						table.appendChild(li);
					}
				}, 1000);
			}
//			if (mui.os.plus) {
//				mui.plusReady(function() {
//					setTimeout(function() {
//						mui('#pullrefresh').pullRefresh().pullupLoading();
//					}, 500);
//
//				});
//			} else {
//				mui.ready(function() {
//					mui('#pullrefresh').pullRefresh().pullupLoading();
//				});
//			}
	</script>
	<script src="main.js" type="text/javascript" charset="utf-8"></script>
	</body>
</html>
